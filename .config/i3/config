# VARIABLES

set $mod Mod1
set $ws1 Web
set $ws2 Code
set $ws3 Misc

# MISC

floating_modifier $mod 
default_border pixel 0
default_floating_border pixel 0
font FiraCode Nerd Font Mono

# STARTUP

exec --no-startup-id wmctrl -c Plasma
exec --no-startup-id sleep 1; nitrogen --restore &; sleep 1; picom -b
exec_always --no-startup-id $HOME/.config/bin/i3-auto-layout
exec --no-startup-id alacritty --title "scratchpad"

# GAPS

gaps inner 20
gaps outer 30
gaps bottom -10

# KEYBINDINGS

bindsym $mod+Return exec --no-startup-id alacritty
bindcode 133 exec --no-startup-id qdbus org.kde.lattedock /Latte activateLauncherMenu
bindsym $mod+space exec --no-startup-id qdbus org.kde.klauncher5 /KLauncher exec_blind "dbus-send" "(" "--type=method_call" "--dest=org.kde.krunner" "/App" "org.kde.krunner.App.toggleDisplay" ")"
bindsym $mod+Shift+q kill

bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right 
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down 
bindsym $mod+Shift+k move up 
bindsym $mod+Shift+l move right

bindsym $mod+Shift+v split h
bindsym $mod+v split v
bindsym $mod+q split toggle

bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3

bindsym $mod+Ctrl+1 move container to workspace $ws1
bindsym $mod+Ctrl+2 move container to workspace $ws2
bindsym $mod+Ctrl+3 move container to workspace $ws3


bindsym $mod+Shift+1 move container to workspace $ws1; workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2; workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3; workspace $ws3

bindsym $mod+Shift+r reload; restart
bindsym $mod+Shift+e exec --no-startup-id qdbus org.kde.ksmserver /KSMServer org.kde.KSMServerInterface.logout -1 -1 -1

bindsym $mod+r mode resize
bindsym $mod+Shift+g mode gaps

bindsym Print exec --no-startup-id spectacle -bcr -o "$HOME/Pictures/Screenshots/$(date '+%Y-%m-%d_%H%M%S').png"
bindsym Shift+Print exec --no-startup-id spectacle -bc -o "$HOME/Pictures/Screenshots/$(date '+%Y-%m-%d_%H%M%S').png"

bindsym --whole-window $mod+Shift+t floating toggle
bindsym $mod+Shift+x sticky toggle

# WINDOWS RULES

for_window [class="Spotify"] floating enable, resize set 1280 720, move position 320px 180px
for_window [class="Alacritty" title="scratchpad"] floating enable, resize set 1024 576, move position 448px 50px
for_window [class="firefox" title="Picture-in-Picture"] sticky enable
for_window [class="Virt-manager"] floating enable
for_window [class="dolphin"] floating enable
for_window [urgent="latest"] focus
for_window [class="VirtualBox Manager"] floating enable
for_window [class="gwenview"] floating enable
for_window [class="Zathura"] floating enable, resize set 714 944, move position 1156 50

# SCRATCHPADS

for_window [class="Spotify"][floating] move scratchpad
for_window [class="Alacritty" title="scratchpad"] move scratchpad
for_window [class="VirtualBox Manager"] move scratchpad
for_window [class="Zathura"] move scratchpad
bindsym $mod+s [class="Spotify"] scratchpad show
bindsym $mod+z [class="Alacritty" title="scratchpad"] scratchpad show
bindsym $mod+f [class="VirtualBox Manager"] scratchpad show
bindsym $mod+x [class="Zathura"] scratchpad show

# PLASMA COMPATIBILITY

for_window [title="Desktop â€” Plasma"] kill, floating enable, border none
for_window [class="plasmashell"] floating enable
for_window [class="Plasma"] floating enable, border none
for_window [title="plasma-desktop"] floating enable, border none
for_window [title="win7"] floating enable, border none
for_window [class="krunner"] floating enable, border none
for_window [class="Kmix"] floating enable; border none
for_window [class="Klipper"] floating enable, border none
for_window [class="Plasmoidviewer"] floating enable, border none
for_window [class="lattedock"] floating enable, border none
for_window [class="(?i)*nextcloud*"] floating disable
for_window [class="systemsettings"] floating enable
for_window [class="plasmashell" window_type="notification"] floating enable, border none
no_focus [window_type="notification"]

# PLASMA POSITIONING

for_window [class="krunner"] move position 694px 0px
for_window [class="plasmashell" window_type="notification"] move position 819px 515px

# STEAM

for_window [class="^Steam$" title="Friends List"] floating enable
for_window [class="^Steam$" title="Steam - News"] floating enable
for_window [class="^Steam$" title=".* - Chat"] floating enable
for_window [class="^Steam$" title="^Settings$"] floating enable
for_window [class="^Steam$" title=".* - event started"] floating enable
for_window [class="^Steam$" title=".* CD key"] floating enable
for_window [class="^Steam$" title="^Steam - Self Updater$"] floating enable
for_window [class="^Steam$" title="^Screenshot Uploader$"] floating enable
for_window [class="^Steam$" title="^Steam Guard - Computer Authorization Required$"] floating enable
for_window [title="^Steam Keyboard$"] floating enable

# MODES

mode "resize" {
	bindsym h resize shrink width 5 px or 5 ppt
	bindsym j resize grow height 5 px or 5 ppt
	bindsym k resize shrink height 5 px or 5 ppt
	bindsym l resize grow width 5 px or 5 ppt

	bindsym Return mode "default"
	bindsym Escape mode "default"
}

mode gaps {
	bindsym o mode outer
	bindsym i mode inner
	bindsym r gaps outer current set 0; gaps inner current set 40; gaps top current set 30
	bindsym Return mode "default"
	bindsym Escape mode "default"
}

mode outer {
	bindcode 21 gaps outer current plus 5
	bindcode 20 gaps outer current minus 5
	bindsym Return mode "default"
	bindsym Escape mode "default"
}

mode inner {
	bindcode 21 gaps inner current plus 5
	bindcode 20 gaps inner current minus 5
	bindsym Return mode "default"
	bindsym Escape mode "default"
}
